{% extends 'base.html' %}
{% set page_name = 'dashboard' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
    {% include 'navbar.html' %}
    <div class='container'>
        <div class='col m-4'>
            <div class='row'>
                <div class='col text-center'>
                    <h1>{{ item_name }}</h1>
                </div>
            </div>
            <div class='row'>
                <div class='col'>
                    <div class='m-4 chart' id='request-breakdown-chart' style='width: 100%; height: 60vh'></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script>
        Plotly.newPlot('request-breakdown-chart', [
            {% for label, datum in zip(request_breakdown_labels, request_breakdown_data) %} {
                x: ['Requester'],
                y: ['{{ datum|safe }}'],
                marker: {
                    color: getChartBackgroundColor({{ loop.index0 }}),
                    line: {
                        color: getChartLineColor({{ loop.index0 }}),
                        width: 1
                    }
                },
                name: '{{ label|safe }}',
                type: 'bar'
            }, {% endfor %}], {
                title: 'Most requests by user',
                barmode: 'stack',
                xaxis: {
                    title: 'Requester'
                }, yaxis: {
                    title: 'Request count'
                }
            }
        );
    </script>
{% endblock %}